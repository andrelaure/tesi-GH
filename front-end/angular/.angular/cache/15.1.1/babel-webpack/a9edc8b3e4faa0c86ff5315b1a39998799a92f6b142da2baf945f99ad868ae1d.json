{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./officesManagement.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./officesManagement.component.scss?ngResource\";\nimport { Component } from \"@angular/core\";\nimport { Store } from \"@ngrx/store\";\nimport { environment } from \"src/environments/environment\";\nimport { of } from \"rxjs/internal/observable/of\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { Subject, firstValueFrom } from \"rxjs\";\nimport { getRandomId } from \"src/app/redux/actions\";\nimport { addOfficesData } from \"src/app/redux/offices/offices.actions\";\nlet OfficesManagementComponent = class OfficesManagementComponent {\n  get selectedOfficesData() {\n    return this._selectedOfficesData;\n  }\n  set selectedOfficesData(value) {\n    this._selectedOfficesData = value;\n  }\n  constructor(store, router, route) {\n    this.store = store;\n    this.router = router;\n    this.route = route;\n    this.officeData$ = of([]);\n    this.editedOffices = {};\n    this.office = {\n      officesName: '',\n      officesCapacity: null,\n      userId: null\n    };\n    this.officesType = [{\n      officesType: \"Ufficio standard\"\n    }, {\n      officesType: \"Sala riunioni\"\n    }, {\n      officesType: \"Sala ristoro\"\n    }, {\n      officesType: \"Ufficio amministrativo\"\n    }, {\n      officesType: \"Ufficio dirigenti\"\n    }];\n    this.selectedType = null;\n    //used to blocking some offices for only some user\n    this.usersId = [{\n      usersId: \"Utente 1\"\n    }, {\n      usersId: \"Utente 2\"\n    }, {\n      usersId: \"Utente 3\"\n    }];\n    this.selectedUsers = [];\n    this.showAddForm = true;\n    this.successAdd = false;\n    this.successUpdate = false;\n    this.expandedMap = {};\n    this.lastSearch$ = of(null);\n    this.officesDataFilters$ = of({});\n    this.totalRecords$ = of(0);\n    this.globalFiltersFields = Object.keys(this.office);\n    this.filtersSubj$ = new Subject();\n    this._firstQuery = true;\n    //this.officeData$ = store.select(selectOfficesData);\n    this.officesData$.subscribe(data => {\n      if (data) {\n        data.forEach(notice => {\n          this.expandedMap[notice.noticeId] = false;\n        });\n      }\n    });\n    this.isLoading$ = store.select(selectIsLoading).pipe(distinctUntilChanged());\n    this.officesDataFilters$ = store.select(selectOfficesDataFilters);\n    this.filtersSub = this.filtersSubj$.asObservable().pipe(debounceTime(1000)).subscribe(a => this.store.dispatch(a));\n    this.lastSearch$ = store.select(selectOfficesDataFilters).pipe(take(1), map(f => f.filtering && f.filtering.length > 0 ? f.filtering[0].value : \"\"));\n  }\n  //add officeData\n  addOffice(form) {\n    if (this.selectedType) {\n      this.office.officesType = this.selectedType.officesType;\n    }\n    if (this.selectedUsers.length > 0) {\n      const selectedUsersIds = this.selectedUsers.map(user => user.usersId);\n      const usersIdAsString = selectedUsersIds.join(\", \");\n      this.office.userId = usersIdAsString;\n    }\n    console.log(this.office);\n    this.store.dispatch(addOfficesData({\n      item: this.office,\n      _id: getRandomId()\n    }));\n    this.resetFormFields(form);\n    this.successAdd = true;\n    this.successUpdate = false;\n  }\n  resetFormFields(form) {\n    form.resetForm();\n    this.office = {\n      officesName: '',\n      officesCapacity: 1\n    };\n    this.selectedType = null;\n    this.selectedUsers = [];\n  }\n  //delete officeData\n  //update officeData\n  filter(value) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const currentQueryParams = yield firstValueFrom(this.noticeDataFilters$.pipe(take(1)));\n      const newQueryParams = Object.assign(Object.assign({}, currentQueryParams), {\n        paging: currentQueryParams.paging ? currentQueryParams.paging : {\n          skip: 0,\n          take: environment.defaultNumberOfRowsPerPage\n        },\n        filtering: value ? [{\n          column: this.globalFiltersFields.join(\",\"),\n          predicate: \"LK\",\n          value: value,\n          kind: \"STRING\"\n        }] : []\n      });\n      this.filtersSubj$.next(changeNoticeDataFilters({\n        queryParams: newQueryParams,\n        _id: getRandomId()\n      }));\n    });\n  }\n  sort($event) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this._firstQuery) {\n        this._firstQuery = false;\n        return;\n      }\n      const currentQueryParams = yield firstValueFrom(this.noticeDataFilters$.pipe(take(1)));\n      const newQueryParams = Object.assign(Object.assign({}, currentQueryParams), {\n        ordering: $event.sortField ? [{\n          column: $event.sortField,\n          columnPrefix: \"\",\n          descending: $event.sortOrder > 0\n        }] : [],\n        paging: currentQueryParams.paging ? $event.first !== null || $event.first !== undefined ? {\n          skip: $event.first,\n          take: $event.rows\n        } : currentQueryParams.paging : {\n          skip: 0,\n          take: environment.defaultNumberOfRowsPerPage\n        }\n      });\n      this.filtersSubj$.next(changeNoticeDataFilters({\n        queryParams: newQueryParams,\n        _id: getRandomId()\n      }));\n    });\n  }\n  ngOnInit() {\n    this.noticeData$ = this.store.select(selectNoticeData).pipe(startWith(this.route.snapshot.data.NoticeData));\n    this.noticeData$.pipe(filter(data => !!data)).subscribe(data => {\n      this.totalRecords$ = this.noticeData$.pipe(map(x => x ? x[0] ? x[0].count : 0 : 0));\n    });\n  }\n  ngOnDestroy() {\n    var _a;\n    (_a = this.filtersSub) === null || _a === void 0 ? void 0 : _a.unsubscribe();\n  }\n};\nOfficesManagementComponent.ctorParameters = () => [{\n  type: Store\n}, {\n  type: Router\n}, {\n  type: ActivatedRoute\n}];\nOfficesManagementComponent = __decorate([Component({\n  selector: \"app-officesManagement\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], OfficesManagementComponent);\nexport { OfficesManagementComponent };","map":{"version":3,"mappings":"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","names":["Component","Store","environment","of","ActivatedRoute","Router","Subject","firstValueFrom","getRandomId","addOfficesData","OfficesManagementComponent","selectedOfficesData","_selectedOfficesData","value","constructor","store","router","route","officesName","officesCapacity","userId","officesType","usersId","Object","keys","office","officesData$","subscribe","data","forEach","notice","expandedMap","noticeId","isLoading$","select","selectIsLoading","pipe","distinctUntilChanged","officesDataFilters$","selectOfficesDataFilters","filtersSub","filtersSubj$","asObservable","debounceTime","a","dispatch","lastSearch$","take","map","f","filtering","length","addOffice","form","selectedType","selectedUsers","selectedUsersIds","user","usersIdAsString","join","console","log","item","_id","resetFormFields","successAdd","successUpdate","resetForm","filter","currentQueryParams","noticeDataFilters$","newQueryParams","paging","skip","defaultNumberOfRowsPerPage","column","globalFiltersFields","predicate","kind","next","changeNoticeDataFilters","queryParams","sort","$event","_firstQuery","ordering","sortField","columnPrefix","descending","sortOrder","first","undefined","rows","ngOnInit","noticeData$","selectNoticeData","startWith","snapshot","NoticeData","totalRecords$","x","count","ngOnDestroy","unsubscribe","selector","template"],"sourceRoot":"","sources":["C:\\Users\\andrea\\Desktop\\SIGLA\\tesi\\tesi-andrea-lauretta\\front-end\\angular\\src\\app\\components\\admin\\officesManagement\\officesManagement.component.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from \"@angular/core\";\r\nimport { NgForm } from \"@angular/forms\";\r\n\r\nimport { AppState, DynamicQueryPart, Filtering} from \"src/app/redux/state\";\r\nimport { Action, Store } from \"@ngrx/store\";\r\n\r\nimport {OfficesData} from \"src/app/redux/offices/offices.state\";\r\nimport { selectOfficesData } from \"src/app/redux/offices/offices.selectors\";\r\n\r\nimport { environment } from \"src/environments/environment\";\r\nimport { of } from \"rxjs/internal/observable/of\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { Observable, Subject, Subscription, firstValueFrom} from \"rxjs\";\r\nimport { getRandomId } from \"src/app/redux/actions\";\r\nimport { addOfficesData } from \"src/app/redux/offices/offices.actions\";\r\nimport { LazyLoadEvent } from \"primeng/api/lazyloadevent\";\r\n\r\n@Component({\r\n    selector: \"app-officesManagement\",\r\n    templateUrl: \"./officesManagement.component.html\",\r\n    styleUrls: [\"./officesManagement.component.scss\"],\r\n})\r\n\r\nexport class OfficesManagementComponent  implements OnInit, OnDestroy{ \r\n\r\n    officeData$: Observable<OfficesData[]> = of([]);\r\n\r\n    public editedOffices: Partial<OfficesData> = {};\r\n\r\n    office: Partial<OfficesData> = {\r\n        officesName : '',\r\n        officesCapacity : null,  \r\n        userId: null,\r\n    };\r\n\r\n    officesType: any = [ \r\n        { officesType: \"Ufficio standard\" },\r\n        { officesType: \"Sala riunioni\" },\r\n        { officesType: \"Sala ristoro\" },\r\n        { officesType: \"Ufficio amministrativo\" },\r\n        { officesType: \"Ufficio dirigenti\" },\r\n    ];\r\n    \r\n    selectedType: any = null;\r\n\r\n    //used to blocking some offices for only some user\r\n    usersId: any[] = [  //to fill with keyclock users VIP or Amministrazione\r\n        { usersId: \"Utente 1\" },\r\n        { usersId: \"Utente 2\" },\r\n        { usersId: \"Utente 3\" },\r\n    ];\r\n\r\n    selectedUsers: any[] = [];\r\n\r\n    showAddForm = true;\r\n    successAdd: boolean = false;\r\n    successUpdate: boolean = false;\r\n\r\n    \r\n    expandedMap: { [key: number]: boolean } = {};\r\n\r\n    lastSearch$: Observable<string> = of(null);\r\n    officesDataFilters$: Observable<DynamicQueryPart> = of({});\r\n    isLoading$: Observable<boolean>;\r\n    totalRecords$: Observable<number> = of(0);\r\n    globalFiltersFields = Object.keys(this.office);\r\n    filtersSubj$ = new Subject<Action>();\r\n    filtersSub: Subscription;\r\n\r\n    private _firstQuery: boolean = true;\r\n    private _selectedOfficesData: OfficesData;\r\n    get selectedOfficesData() {\r\n        return this._selectedOfficesData;\r\n    }\r\n    set selectedOfficesData(value: OfficesData) {\r\n        this._selectedOfficesData = value;\r\n    }\r\n\r\n    constructor(\r\n        private store: Store<AppState>,\r\n        private router: Router,\r\n        private route: ActivatedRoute\r\n    ){\r\n        //this.officeData$ = store.select(selectOfficesData);\r\n        this.officesData$.subscribe((data) => {\r\n            if(data) { data.forEach((notice) => {this.expandedMap[notice.noticeId] = false; });} });\r\n        this.isLoading$ = store.select(selectIsLoading).pipe(distinctUntilChanged());\r\n        this.officesDataFilters$ = store.select(selectOfficesDataFilters);\r\n        this.filtersSub = this.filtersSubj$.asObservable().pipe(debounceTime(1000)).subscribe((a) => this.store.dispatch(a));\r\n        this.lastSearch$ = store.select(selectOfficesDataFilters).pipe(take(1), map((f) => f.filtering && f.filtering.length > 0 ? f.filtering[0].value : \"\"));\r\n        \r\n    }\r\n\r\n    //add officeData\r\n    addOffice(form: NgForm) {\r\n        if(this.selectedType) {\r\n            this.office.officesType = this.selectedType.officesType;\r\n        }\r\n        if (this.selectedUsers.length > 0) {\r\n            const selectedUsersIds: string[] = this.selectedUsers.map((user) => user.usersId);\r\n            const usersIdAsString: string = selectedUsersIds.join(\", \");\r\n            this.office.userId = usersIdAsString;\r\n        }\r\n\r\n        console.log(this.office);\r\n        this.store.dispatch( addOfficesData({ item: this.office, _id: getRandomId() }) );\r\n    \r\n        this.resetFormFields(form);\r\n        this.successAdd = true;\r\n        this.successUpdate = false;\r\n    }\r\n\r\n    resetFormFields(form: NgForm) {\r\n        form.resetForm();\r\n        this.office = {\r\n            officesName : '',\r\n            officesCapacity : 1,\r\n        };\r\n        this.selectedType = null;\r\n        this.selectedUsers = []\r\n    }\r\n\r\n \r\n    //delete officeData\r\n\r\n    //update officeData\r\n\r\n\r\n    async filter(value: string) {\r\n        const currentQueryParams = await firstValueFrom(this.noticeDataFilters$.pipe(take(1)));\r\n        const newQueryParams: DynamicQueryPart = {\r\n            ...currentQueryParams,\r\n            paging: currentQueryParams.paging\r\n                ? currentQueryParams.paging\r\n                : { skip: 0, take: environment.defaultNumberOfRowsPerPage },\r\n            filtering: value\r\n                ? [{ column: this.globalFiltersFields.join(\",\"), predicate: \"LK\", value: value, kind: \"STRING\" } as Filtering]\r\n                : []\r\n        };\r\n        this.filtersSubj$.next(changeNoticeDataFilters({ queryParams: newQueryParams, _id: getRandomId() }));\r\n    }\r\n\r\n    async sort($event: LazyLoadEvent) {\r\n        if (this._firstQuery) {\r\n            this._firstQuery = false;\r\n            return;\r\n        }\r\n        const currentQueryParams = await firstValueFrom(this.noticeDataFilters$.pipe(take(1)));\r\n        const newQueryParams = {\r\n            ...currentQueryParams,\r\n            ordering: $event.sortField                \r\n                ? [{ column: $event.sortField, columnPrefix: \"\", descending: $event.sortOrder > 0}]\r\n                : [],\r\n            paging: currentQueryParams.paging\r\n                ? ($event.first !== null || $event.first !== undefined)\r\n                    ? { skip: $event.first, take: $event.rows }\r\n                    : currentQueryParams.paging\r\n                : { skip: 0, take: environment.defaultNumberOfRowsPerPage }\r\n        };\r\n        this.filtersSubj$.next(changeNoticeDataFilters({ queryParams: newQueryParams, _id: getRandomId() }));\r\n    }\r\n\r\n    ngOnInit(): void {\r\n        this.noticeData$ = this.store.select(selectNoticeData).pipe(startWith(this.route.snapshot.data.NoticeData));\r\n        this.noticeData$.pipe(\r\n            filter(data => !!data)\r\n        ).subscribe((data) => {\r\n            this.totalRecords$ = this.noticeData$.pipe(map((x) => (x ? (x[0] ? x[0].count : 0) : 0)));\r\n        });\r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        this.filtersSub?.unsubscribe();\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}