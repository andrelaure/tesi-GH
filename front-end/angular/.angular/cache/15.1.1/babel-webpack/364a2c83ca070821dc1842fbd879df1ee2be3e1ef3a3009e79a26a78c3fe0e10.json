{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Injectable } from '@angular/core';\nimport { ofType, createEffect, Actions } from '@ngrx/effects';\nimport { map, mergeMap, catchError } from 'rxjs/operators';\nimport { CustomHttpClient } from '../../services/custom-http-client.service';\nimport { environment } from '../../../environments/environment'; //  src/environments/environment';\nimport { addOfficesData, addOfficesDataError, addOfficesDataSuccess, changeOfficesDataFilters, deleteOfficesData, deleteOfficesDataError, deleteOfficesDataSuccess, searchOfficesData, searchOfficesDataError, searchOfficesDataSuccess, updateOfficesData, updateOfficesDataError, updateOfficesDataSuccess } from './offices.actions';\nimport { of } from 'rxjs/internal/observable/of';\nlet OfficesEffect = class OfficesEffect {\n  constructor(actions$, httpClient) {\n    this.actions$ = actions$;\n    this.httpClient = httpClient;\n    //search OfficesData\n    this._serachOfficesData = createEffect(() => this.actions$.pipe(ofType(searchOfficesData), mergeMap(a => {\n      const response$ = this.httpClient.post(`${environment.apiUrl}/offices/searchOfficesData`, a.queryParams, {\n        responseType: 'json'\n      });\n      return response$.pipe(map(r => r !== null && r !== void 0 ? r : []), map(r => searchOfficesDataSuccess({\n        result: r,\n        _id: a._id\n      })), catchError((err, _) => {\n        return [searchOfficesDataError({\n          error: err.message,\n          _id: a._id\n        })];\n      }));\n    })));\n    this._changeOfficesDataFilters = createEffect(() => this.actions$.pipe(ofType(changeOfficesDataFilters), map(a => searchOfficesData({\n      queryParams: a.queryParams,\n      _id: a._id\n    }))));\n    //add OfficesData \n    this._addOfficesData = createEffect(() => this.actions$.pipe(ofType(addOfficesData), mergeMap(a => {\n      const response$ = this.httpClient.post(`${environment.apiUrl}/offices/addOfficesData`, [a.item], {\n        responseType: 'json'\n      });\n      return response$.pipe(map(r => r !== null && r !== void 0 ? r : []), map(r => addOfficesDataSuccess({\n        result: r,\n        _id: a._id\n      })), catchError((err, _) => {\n        return [addOfficesDataError({\n          error: err.message,\n          _id: a._id\n        })];\n      }));\n    })));\n    //delete OfficesData\n    this._deleteOfficesData = createEffect(() => this.actions$.pipe(ofType(deleteOfficesData), mergeMap(a => {\n      const response$ = this.httpClient.delete(`${environment.apiUrl}/offices/deleteOfficesData/${a.item.officesId}`, {\n        responseType: 'json'\n      });\n      return response$.pipe(map(r => r !== null && r !== void 0 ? r : []), map(r => deleteOfficesDataSuccess({\n        result: r,\n        _id: a._id\n      })), catchError((err, _) => {\n        return [deleteOfficesDataError({\n          error: err.message,\n          _id: a._id\n        })];\n      }));\n    })));\n    //update OfficesData\n    this._updateOfficesData = createEffect(() => this.actions$.pipe(ofType(updateOfficesData), mergeMap(a => this.httpClient.put(`${environment.apiUrl}/offices/updateOfficesData`, [a.item], {\n      responseType: 'json'\n    }).pipe(map(r => r !== null && r !== void 0 ? r : []), map(r => updateOfficesDataSuccess({\n      result: r,\n      _id: a._id\n    })), catchError((err, _) => of(updateOfficesDataError({\n      error: err.message,\n      _id: a._id\n    })))))));\n  }\n};\nOfficesEffect.ctorParameters = () => [{\n  type: Actions\n}, {\n  type: CustomHttpClient\n}];\nOfficesEffect = __decorate([Injectable()], OfficesEffect);\nexport { OfficesEffect };","map":{"version":3,"mappings":";AAAA,SAASA,UAAU,QAAQ,eAAe;AAC1C,SAASC,MAAM,EAAEC,YAAY,EAAEC,OAAO,QAAQ,eAAe;AAC7D,SAASC,GAAG,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,gBAAgB;AAC1D,SAASC,gBAAgB,QAAQ,2CAA2C;AAC5E,SAASC,WAAW,QAAQ,mCAAmC,CAAC,CAAE;AAClE,SAASC,cAAc,EAAEC,mBAAmB,EAAEC,qBAAqB,EAAEC,wBAAwB,EAAEC,iBAAiB,EAAEC,sBAAsB,EAAEC,wBAAwB,EAAkBC,iBAAiB,EAAEC,sBAAsB,EAAEC,wBAAwB,EAAEC,iBAAiB,EAAEC,sBAAsB,EAAEC,wBAAwB,QAAQ,mBAAmB;AAGvV,SAASC,EAAE,QAAQ,6BAA6B;AAGzC,IAAMC,aAAa,GAAnB,MAAMA,aAAa;EAEtBC,YACYC,QAAiB,EACjBC,UAA4B;IAD5B,aAAQ,GAARD,QAAQ;IACR,eAAU,GAAVC,UAAU;IAItB;IACA,uBAAkB,GAAGxB,YAAY,CAC7B,MAAM,IAAI,CAACuB,QAAQ,CAACE,IAAI,CACpB1B,MAAM,CAACe,iBAAiB,CAAC,EACzBX,QAAQ,CAACuB,CAAC,IAAG;MACT,MAAMC,SAAS,GAAG,IAAI,CAACH,UAAU,CAACI,IAAI,CAAgB,GAAGtB,WAAW,CAACuB,MAAM,4BAA4B,EAAEH,CAAC,CAACI,WAAW,EAAE;QAAEC,YAAY,EAAE;MAAM,CAAC,CAAC;MAChJ,OAAOJ,SAAS,CAACF,IAAI,CACjBvB,GAAG,CAAC8B,CAAC,IAAIA,CAAC,aAADA,CAAC,cAADA,CAAC,GAAI,EAAE,CAAC,EACjB9B,GAAG,CAAC8B,CAAC,IAAIhB,wBAAwB,CAAC;QAACiB,MAAM,EAAED,CAAC;QAAEE,GAAG,EAAER,CAAC,CAACQ;MAAG,CAAE,CAAC,CAAC,EAC5D9B,UAAU,CAAC,CAAC+B,GAAsB,EAAEC,CAAC,KAAI;QACrC,OAAO,CAACrB,sBAAsB,CAAC;UAACsB,KAAK,EAAEF,GAAG,CAACG,OAAO;UAAEJ,GAAG,EAAER,CAAC,CAACQ;QAAG,CAAC,CAAC,CAAC;MACrE,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CACV;IAED,8BAAyB,GAAGlC,YAAY,CACpC,MAAM,IAAI,CAACuB,QAAQ,CAACE,IAAI,CACpB1B,MAAM,CAACW,wBAAwB,CAAC,EAChCR,GAAG,CAACwB,CAAC,IAAIZ,iBAAiB,CAAC;MAACgB,WAAW,EAAEJ,CAAC,CAACI,WAAW;MAAEI,GAAG,EAAER,CAAC,CAACQ;IAAG,CAAC,CAAC,CAAC,CACpE,CACR;IAED;IACA,oBAAe,GAAGlC,YAAY,CAC1B,MAAM,IAAI,CAACuB,QAAQ,CAACE,IAAI,CACpB1B,MAAM,CAACQ,cAAc,CAAC,EACtBJ,QAAQ,CAACuB,CAAC,IAAG;MACT,MAAMC,SAAS,GAAG,IAAI,CAACH,UAAU,CAACI,IAAI,CAAgB,GAAGtB,WAAW,CAACuB,MAAM,yBAAyB,EAAE,CAACH,CAAC,CAACa,IAAI,CAAC,EAAE;QAAER,YAAY,EAAE;MAAM,CAAC,CAAC;MACxI,OAAOJ,SAAS,CAACF,IAAI,CACjBvB,GAAG,CAAC8B,CAAC,IAAIA,CAAC,aAADA,CAAC,cAADA,CAAC,GAAI,EAAE,CAAC,EACjB9B,GAAG,CAAC8B,CAAC,IAAIvB,qBAAqB,CAAC;QAACwB,MAAM,EAAED,CAAC;QAAEE,GAAG,EAAER,CAAC,CAACQ;MAAG,CAAE,CAAC,CAAC,EACzD9B,UAAU,CAAC,CAAC+B,GAAsB,EAAEC,CAAC,KAAI;QACrC,OAAO,CAAC5B,mBAAmB,CAAC;UAAC6B,KAAK,EAAEF,GAAG,CAACG,OAAO;UAAEJ,GAAG,EAAER,CAAC,CAACQ;QAAG,CAAC,CAAC,CAAC;MAClE,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CACV;IAGD;IACA,uBAAkB,GAAGlC,YAAY,CAC7B,MAAM,IAAI,CAACuB,QAAQ,CAACE,IAAI,CACpB1B,MAAM,CAACY,iBAAiB,CAAC,EACzBR,QAAQ,CAACuB,CAAC,IAAG;MACT,MAAMC,SAAS,GAAG,IAAI,CAACH,UAAU,CAACgB,MAAM,CAAgB,GAAGlC,WAAW,CAACuB,MAAM,8BAA8BH,CAAC,CAACa,IAAI,CAACE,SAAS,EAAE,EAAG;QAAEV,YAAY,EAAE;MAAM,CAAC,CAAC;MACxJ,OAAOJ,SAAS,CAACF,IAAI,CACjBvB,GAAG,CAAC8B,CAAC,IAAIA,CAAC,aAADA,CAAC,cAADA,CAAC,GAAI,EAAE,CAAC,EACjB9B,GAAG,CAAC8B,CAAC,IAAInB,wBAAwB,CAAC;QAACoB,MAAM,EAAED,CAAC;QAAEE,GAAG,EAAER,CAAC,CAACQ;MAAG,CAAE,CAAC,CAAC,EAC5D9B,UAAU,CAAC,CAAC+B,GAAsB,EAAEC,CAAC,KAAI;QACrC,OAAO,CAACxB,sBAAsB,CAAC;UAACyB,KAAK,EAAEF,GAAG,CAACG,OAAO;UAAEJ,GAAG,EAAER,CAAC,CAACQ;QAAG,CAAC,CAAC,CAAC;MACrE,CAAC,CAAC,CAAC;IACX,CAAC,CAAC,CAAC,CACV;IAED;IACA,uBAAkB,GAAGlC,YAAY,CAAC,MAC9B,IAAI,CAACuB,QAAQ,CAACE,IAAI,CACd1B,MAAM,CAACkB,iBAAiB,CAAC,EACzBd,QAAQ,CAACuB,CAAC,IACN,IAAI,CAACF,UAAU,CAACkB,GAAG,CAAgB,GAAGpC,WAAW,CAACuB,MAAM,4BAA4B,EAAE,CAACH,CAAC,CAACa,IAAI,CAAC,EAAE;MAAER,YAAY,EAAE;IAAM,CAAE,CACvH,CAACN,IAAI,CACFvB,GAAG,CAAC8B,CAAC,IAAIA,CAAC,aAADA,CAAC,cAADA,CAAC,GAAI,EAAE,CAAC,EACjB9B,GAAG,CAAC8B,CAAC,IAAIb,wBAAwB,CAAC;MAAEc,MAAM,EAAED,CAAC;MAAEE,GAAG,EAAER,CAAC,CAACQ;IAAG,CAAE,CAAC,CAAC,EAC7D9B,UAAU,CAAC,CAAC+B,GAAsB,EAAEC,CAAC,KACjChB,EAAE,CAACF,sBAAsB,CAAC;MAAEmB,KAAK,EAAEF,GAAG,CAACG,OAAO;MAAEJ,GAAG,EAAER,CAAC,CAACQ;IAAG,CAAE,CAAC,CAAC,CACjE,CACJ,CACJ,CACJ,CACJ;EAvEE;;;;;;;AALMb,aAAa,eADzBvB,UAAU,EAAE,GACAuB,aAAa,CAsFzB;SAtFYA,aAAa","names":["Injectable","ofType","createEffect","Actions","map","mergeMap","catchError","CustomHttpClient","environment","addOfficesData","addOfficesDataError","addOfficesDataSuccess","changeOfficesDataFilters","deleteOfficesData","deleteOfficesDataError","deleteOfficesDataSuccess","searchOfficesData","searchOfficesDataError","searchOfficesDataSuccess","updateOfficesData","updateOfficesDataError","updateOfficesDataSuccess","of","OfficesEffect","constructor","actions$","httpClient","pipe","a","response$","post","apiUrl","queryParams","responseType","r","result","_id","err","_","error","message","item","delete","officesId","put"],"sourceRoot":"","sources":["C:\\Users\\andrea\\Desktop\\SIGLA\\tesi\\tesi-andrea-lauretta\\front-end\\angular\\src\\app\\redux\\offices\\offices.effects.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { ofType, createEffect, Actions } from '@ngrx/effects';\r\nimport { map, mergeMap, catchError } from 'rxjs/operators';\r\nimport { CustomHttpClient } from '../../services/custom-http-client.service';\r\nimport { environment } from '../../../environments/environment';  //  src/environments/environment';\r\nimport { addOfficesData, addOfficesDataError, addOfficesDataSuccess, changeOfficesDataFilters, deleteOfficesData, deleteOfficesDataError, deleteOfficesDataSuccess, getOfficesData, searchOfficesData, searchOfficesDataError, searchOfficesDataSuccess, updateOfficesData, updateOfficesDataError, updateOfficesDataSuccess,} from './offices.actions';\r\nimport { OfficesData } from './offices.state';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { of } from 'rxjs/internal/observable/of';\r\n\r\n@Injectable()\r\nexport class OfficesEffect{\r\n\r\n    constructor(\r\n        private actions$: Actions,\r\n        private httpClient: CustomHttpClient\r\n    ){ }\r\n\r\n\r\n    //search OfficesData\r\n    _serachOfficesData = createEffect(\r\n        () => this.actions$.pipe(\r\n            ofType(searchOfficesData),\r\n            mergeMap(a => {\r\n                const response$ = this.httpClient.post<OfficesData[]>(`${environment.apiUrl}/offices/searchOfficesData`, a.queryParams, { responseType: 'json'});\r\n                return response$.pipe(\r\n                    map(r => r ?? []),\r\n                    map(r => searchOfficesDataSuccess({result: r, _id: a._id })),\r\n                    catchError((err: HttpErrorResponse, _) => {\r\n                        return [searchOfficesDataError({error: err.message, _id: a._id})];\r\n                    }));\r\n            }))\r\n    );\r\n\r\n    _changeOfficesDataFilters = createEffect(\r\n        () => this.actions$.pipe(\r\n            ofType(changeOfficesDataFilters),\r\n            map(a => searchOfficesData({queryParams: a.queryParams, _id: a._id}))\r\n            )\r\n    );\r\n\r\n    //add OfficesData \r\n    _addOfficesData = createEffect(\r\n        () => this.actions$.pipe(\r\n            ofType(addOfficesData),\r\n            mergeMap(a => {\r\n                const response$ = this.httpClient.post<OfficesData[]>(`${environment.apiUrl}/offices/addOfficesData`, [a.item], { responseType: 'json'});\r\n                return response$.pipe(\r\n                    map(r => r ?? []),\r\n                    map(r => addOfficesDataSuccess({result: r, _id: a._id })),\r\n                    catchError((err: HttpErrorResponse, _) => {\r\n                        return [addOfficesDataError({error: err.message, _id: a._id})];\r\n                    }));\r\n            }))\r\n    );\r\n\r\n\r\n    //delete OfficesData\r\n    _deleteOfficesData = createEffect(\r\n        () => this.actions$.pipe(\r\n            ofType(deleteOfficesData),\r\n            mergeMap(a => {\r\n                const response$ = this.httpClient.delete<OfficesData[]>(`${environment.apiUrl}/offices/deleteOfficesData/${a.item.officesId}` , { responseType: 'json'});\r\n                return response$.pipe(\r\n                    map(r => r ?? []),\r\n                    map(r => deleteOfficesDataSuccess({result: r, _id: a._id })),\r\n                    catchError((err: HttpErrorResponse, _) => {\r\n                        return [deleteOfficesDataError({error: err.message, _id: a._id})];\r\n                    }));\r\n            }))\r\n    );\r\n\r\n    //update OfficesData\r\n    _updateOfficesData = createEffect(() =>\r\n        this.actions$.pipe(\r\n            ofType(updateOfficesData),\r\n            mergeMap(a => \r\n                this.httpClient.put<OfficesData[]>(`${environment.apiUrl}/offices/updateOfficesData`, [a.item], { responseType: 'json' }\r\n                ).pipe(\r\n                    map(r => r ?? []),\r\n                    map(r => updateOfficesDataSuccess({ result: r, _id: a._id })),\r\n                    catchError((err: HttpErrorResponse, _) =>\r\n                        of(updateOfficesDataError({ error: err.message, _id: a._id }))\r\n                    )\r\n                )\r\n            )\r\n        )\r\n    );\r\n\r\n    //get OfficesData _views\r\n    /*_getAllOfficesData = createEffect(() =>\r\n        this.actions$.pipe(\r\n            ofType(getOfficesData),\r\n            map()\r\n        )\r\n    ):*/\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}