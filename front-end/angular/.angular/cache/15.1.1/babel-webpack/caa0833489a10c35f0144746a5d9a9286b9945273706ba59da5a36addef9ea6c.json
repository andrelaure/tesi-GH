{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./officesManagement.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./officesManagement.component.scss?ngResource\";\nimport { Component } from \"@angular/core\";\nimport { Store } from \"@ngrx/store\";\nimport { selectOfficesData } from \"src/app/redux/offices/offices.selectors\";\nimport { of } from \"rxjs/internal/observable/of\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { getRandomId } from \"src/app/redux/actions\";\nimport { addOfficesData } from \"src/app/redux/offices/offices.actions\";\nlet OfficesManagementComponent = class OfficesManagementComponent {\n  constructor(store, router, route) {\n    this.store = store;\n    this.router = router;\n    this.route = route;\n    this.officeData$ = of([]);\n    this.editedOffices = {};\n    this.office = {\n      officesName: '',\n      officesCapacity: null,\n      userMeetID: null,\n      userId: null\n    };\n    this.officesType = [{\n      officesType: \"Ufficio standard\"\n    }, {\n      officesType: \"Sala riunioni\"\n    }, {\n      officesType: \"Sala ristoro\"\n    }, {\n      officesType: \"Ufficio amministrativo\"\n    }, {\n      officesType: \"Ufficio dirigenti\"\n    }];\n    this.selectedType = null;\n    //used to sending notices to users in meeting-room\n    this.usersMeetingIds = [{\n      usersMeetingIds: \"UserMeet 1\"\n    }, {\n      usersMeetingIds: \"UserMeet 2\"\n    }, {\n      usersMeetingIds: \"UserMeet 3\"\n    }];\n    this.selectedMeetingUsers = [];\n    //used to blocking some offices for only some user\n    this.usersId = [{\n      usersId: \"Utente 1\"\n    }, {\n      usersId: \"Utente 2\"\n    }, {\n      usersId: \"Utente 3\"\n    }];\n    this.selectedUsers = [];\n    this.showAddForm = true;\n    this.successAdd = false;\n    this.successUpdate = false;\n    this.officeData$ = store.select(selectOfficesData);\n  }\n  //add officeData\n  addOffice(form) {\n    if (this.selectedType) {\n      this.office.officesType = this.selectedType.officesType;\n    }\n    if (this.selectedMeetingUsers.length > 0) {\n      const selectedMeetingUsersIds = this.selectedMeetingUsers.map(user => user.usersId);\n      const usersIdAsString = selectedMeetingUsersIds.join(\", \");\n      this.office.userId = usersIdAsString;\n    }\n    if (this.selectedUsers.length > 0) {\n      const selectedUsersIds = this.selectedUsers.map(user => user.usersId);\n      const meetUsersIdAsString = selectedUsersIds.join(\", \");\n      this.office.userMeetID = meetUsersIdAsString;\n    }\n    console.log(this.office);\n    this.store.dispatch(addOfficesData({\n      item: this.office,\n      _id: getRandomId()\n    }));\n    this.resetFormFields(form);\n    this.successAdd = true;\n    this.successUpdate = false;\n  }\n  resetFormFields(form) {\n    form.resetForm();\n    this.office = {\n      officesName: '',\n      officesCapacity: 1\n    };\n    this.selectedType = null;\n    this.selectedUsers = [];\n  }\n  //delete officeData\n  //update officeData\n  ngOnInit() {}\n  ngOnDestroy() {}\n};\nOfficesManagementComponent.ctorParameters = () => [{\n  type: Store\n}, {\n  type: Router\n}, {\n  type: ActivatedRoute\n}];\nOfficesManagementComponent = __decorate([Component({\n  selector: \"app-officesManagement\",\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], OfficesManagementComponent);\nexport { OfficesManagementComponent };","map":{"version":3,"mappings":"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","names":["Component","Store","selectOfficesData","of","ActivatedRoute","Router","getRandomId","addOfficesData","OfficesManagementComponent","constructor","store","router","route","officesName","officesCapacity","userMeetID","userId","officesType","usersMeetingIds","usersId","officeData$","select","addOffice","form","selectedType","office","selectedMeetingUsers","length","selectedMeetingUsersIds","map","user","usersIdAsString","join","selectedUsers","selectedUsersIds","meetUsersIdAsString","console","log","dispatch","item","_id","resetFormFields","successAdd","successUpdate","resetForm","ngOnInit","ngOnDestroy","selector","template"],"sourceRoot":"","sources":["C:\\Users\\andrea\\Desktop\\SIGLA\\tesi\\tesi-andrea-lauretta\\front-end\\angular\\src\\app\\components\\admin\\officesManagement\\officesManagement.component.ts"],"sourcesContent":["import { Component, OnDestroy, OnInit } from \"@angular/core\";\r\nimport { NgForm } from \"@angular/forms\";\r\n\r\nimport { AppState} from \"src/app/redux/state\";\r\nimport { Action, Store } from \"@ngrx/store\";\r\n\r\nimport {OfficesData} from \"src/app/redux/offices/offices.state\";\r\nimport { selectOfficesData } from \"src/app/redux/offices/offices.selectors\";\r\n\r\nimport { environment } from \"src/environments/environment\";\r\nimport { of } from \"rxjs/internal/observable/of\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { Observable, firstValueFrom} from \"rxjs\";\r\nimport { getRandomId } from \"src/app/redux/actions\";\r\nimport { addOfficesData } from \"src/app/redux/offices/offices.actions\";\r\n\r\n@Component({\r\n    selector: \"app-officesManagement\",\r\n    templateUrl: \"./officesManagement.component.html\",\r\n    styleUrls: [\"./officesManagement.component.scss\"],\r\n})\r\n\r\nexport class OfficesManagementComponent  implements OnInit, OnDestroy{ \r\n\r\n    officeData$: Observable<OfficesData[]> = of([]);\r\n\r\n    public editedOffices: Partial<OfficesData> = {};\r\n\r\n    office: Partial<OfficesData> = {\r\n        officesName : '',\r\n        officesCapacity : null,   \r\n        userMeetID: null,     \r\n        userId: null,\r\n    };\r\n\r\n    officesType: any = [ \r\n        { officesType: \"Ufficio standard\" },\r\n        { officesType: \"Sala riunioni\" },\r\n        { officesType: \"Sala ristoro\" },\r\n        { officesType: \"Ufficio amministrativo\" },\r\n        { officesType: \"Ufficio dirigenti\" },\r\n    ];\r\n    \r\n    selectedType: any = null;\r\n\r\n    //used to sending notices to users in meeting-room\r\n    usersMeetingIds: any[] = [  //to fill with keyclock users\r\n        { usersMeetingIds: \"UserMeet 1\" },\r\n        { usersMeetingIds: \"UserMeet 2\" },\r\n        { usersMeetingIds: \"UserMeet 3\" },\r\n    ];\r\n\r\n    selectedMeetingUsers: any[] = [];\r\n\r\n    //used to blocking some offices for only some user\r\n    usersId: any[] = [  //to fill with keyclock users VIP or Amministrazione\r\n        { usersId: \"Utente 1\" },\r\n        { usersId: \"Utente 2\" },\r\n        { usersId: \"Utente 3\" },\r\n    ];\r\n\r\n    selectedUsers: any[] = [];\r\n\r\n    showAddForm = true;\r\n    successAdd: boolean = false;\r\n    successUpdate: boolean = false;\r\n\r\n    constructor(\r\n        private store: Store<AppState>,\r\n        private router: Router,\r\n        private route: ActivatedRoute\r\n    ){\r\n        this.officeData$ = store.select(selectOfficesData);\r\n    }\r\n\r\n    //add officeData\r\n    addOffice(form: NgForm) {\r\n        if(this.selectedType) {\r\n            this.office.officesType = this.selectedType.officesType;\r\n        }\r\n\r\n        if (this.selectedMeetingUsers.length > 0) {\r\n            const selectedMeetingUsersIds: string[] = this.selectedMeetingUsers.map((user) => user.usersId);\r\n            const usersIdAsString: string = selectedMeetingUsersIds.join(\", \");\r\n            this.office.userId = usersIdAsString;\r\n        }\r\n\r\n        if (this.selectedUsers.length > 0) {\r\n            const selectedUsersIds: string[] = this.selectedUsers.map((user) => user.usersId);\r\n            const meetUsersIdAsString: string = selectedUsersIds.join(\", \");\r\n            this.office.userMeetID = meetUsersIdAsString;\r\n        }\r\n\r\n        console.log(this.office);\r\n        this.store.dispatch( addOfficesData({ item: this.office, _id: getRandomId() }) );\r\n    \r\n        this.resetFormFields(form);\r\n        this.successAdd = true;\r\n        this.successUpdate = false;\r\n    }\r\n\r\n    resetFormFields(form: NgForm) {\r\n        form.resetForm();\r\n        this.office = {\r\n            officesName : '',\r\n            officesCapacity : 1,\r\n        };\r\n        this.selectedType = null;\r\n        this.selectedUsers = []\r\n    }\r\n \r\n    //delete officeData\r\n\r\n    //update officeData\r\n\r\n\r\n    ngOnInit(): void {\r\n        \r\n    }\r\n\r\n    ngOnDestroy(): void {\r\n        \r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}